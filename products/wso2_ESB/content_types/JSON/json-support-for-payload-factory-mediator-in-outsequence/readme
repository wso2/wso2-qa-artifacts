This scenario is used to check the json support for payload factory mediator in outsequence of ESB.

Follow the below instructions.

1.make a rest mock service using the jsonresponse.json file and create the mock service as below

create a new rest project
give some name like localhost
and add a mokc service.
in onrequest script write down the following script
==========================================================================
import javax.servlet.http.HttpServletResponse
import com.eviware.soapui.support.Tools


def response = mockRequest.httpResponse
File file = new File("/home/nayomi/Downloads/wso2esb-4.9.0-ALPHA5/jsonresponse.json")
FileInputStream fin = new FileInputStream(file)
response.setStatus( HttpServletResponse.SC_OK )
long length = file.length();
response.setContentLength( ( int )length );
response.setContentType("application/json;charset=utf-8" );
Tools.readAndWrite( fin, length, response.getOutputStream() );
fin.close();

return new com.eviware.soapui.impl.wsdl.mock.WsdlMockResult(mockRequest)
============================================================================

then in set option for mock service, give a port name.

then start the mock service(you can check the response by typing as localhost:5555/mockservice1)

2.Then deploy the singleresponse proxy in esb

3.Then invoke the proxy using below curl command

curl -v -X GET "http://localhost:8280/services/singleresponse"

4.or just go to http://localhost:8280/services/singleresponse by browser.there u l see the formatted json message.
